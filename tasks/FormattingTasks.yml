version: '3'

tasks:
  default:
    desc: Format solution
    silent: true
    cmds:
      - echo "üìù Formatting C# code and applying style conventions..."
      - task format:cleanupcode
      - task format:csharpier
      - echo "‚úÖ All formatting complete!"

  cleanupcode:
    desc: Formats solution with CleanupCode
    silent: true
    cmds:
      - echo "üîß Running CleanupCode for code cleanup and style enforcement..."
      - |
        dotnet jb cleanupcode  \
          MinimalLambda.sln \
          --settings="MinimalLambda.sln.DotSettings" \
          --profile="Built-in: Reformat Code" \
          --verbosity=FATAL \
          --no-build \
          --include="src/**/*;test/**/*;examples/**/*;benchmark/**/*" \
          --exclude="**/bin/**/*;**/obj/**/*"
      - echo "‚úÖ CleanupCode completed successfully!"

  csharpier:
    desc: Formats solution with CSharpier
    silent: true
    cmds:
      - echo "üé® Running CSharpier for opinionated C# code formatting..."
      - dotnet csharpier format .
      - echo "‚úÖ CSharpier completed successfully!"